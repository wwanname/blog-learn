---
import '../app.css'
import Header from './Header.astro'
import Footer from './Footer.astro'

import { ClientRouter } from 'astro:transitions'
type Props = {
  title: string
  description?: string
}

const { title = 'Astro starter kit', description = 'Astro starter kit' } =
  Astro.props
---

<!doctype html>
<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width' />
    <link rel='icon' type='image/svg+xml' href='/favicon.svg' />
    <slot name='redirect' />
    <meta name='generator' content={Astro.generator} />
    <meta name='description' content={description} />
    <title>{title}</title>
    <ClientRouter />
  </head>
  <body>
    <Header />
    <slot />
    <Footer />
  </body>
</html>

<script is:inline>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme')
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark'
    }
    return 'light'
  })()

  const font = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('font')) {
      return localStorage.getItem('font')
    }
    return 'Inter'
  })()

  document.querySelectorAll('.code').forEach(element => {
    element.style.fontFamily =
      font === 'system-ui'
        ? "Consolas, 'Courier New', Courier, monospace"
        : "'Fira Code', monospace"
  })

  document.body.style.fontFamily =
    font === 'system-ui' ? 'system-ui, sans-serif' : 'Inter, sans-serif'
  theme === 'light'
    ? document.documentElement.classList.remove('dark')
    : document.documentElement.classList.add('dark')

  window.localStorage.setItem('theme', theme);
</script>

<style>
  @font-face {
    font-family: 'Inter';
    font-weight: 100 900;
    font-display: swap;
    src: local('Inter'), local('Inter-Regular'), local('Inter Variable'),
      local('Inter-Variable');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }

  @font-face {
    font-family: 'Proxima Soft';
    font-weight: 100 900;
    font-display: swap;
    src: local('Proxima Soft'), local('Proxima Soft-Regular'),
      local('Proxima Soft Variable'), local('Proxima Soft-Variable');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }

  @font-face {
    font-family: 'Youtube Sans';
    font-weight: 100 900;
    font-display: swap;
    src: local('Youtube Sans'), local('Youtube Sans-Regular');
  }

  @font-face {
    font-family: 'Fira Code';
    src:
      url('/assests/fonts/mono/woff2/FiraCode-Light.woff2') format('woff2'),
      url('/assests/fonts/mono/woff/FiraCode-Light.woff') format('woff');
    font-weight: 300;
    font-style: normal;
  }

  @font-face {
    font-family: 'Fira Code';
    src:
      url('/assests/fonts/mono/woff2/FiraCode-Regular.woff2') format('woff2'),
      url('/assests/fonts/mono/woff/FiraCode-Regular.woff') format('woff');
    font-weight: 400;
    font-style: normal;
  }

  @font-face {
    font-family: 'Fira Code';
    src:
      url('/assests/fonts/mono/woff2/FiraCode-Medium.woff2') format('woff2'),
      url('/assests/fonts/mono/woff/FiraCode-Medium.woff') format('woff');
    font-weight: 500;
    font-style: normal;
  }

  @font-face {
    font-family: 'Fira Code';
    src:
      url('/assests/fonts/mono/woff2/FiraCode-SemiBold.woff2') format('woff2'),
      url('/assests/fonts/mono/woff/FiraCode-SemiBold.woff') format('woff');
    font-weight: 600;
    font-style: normal;
  }

  @font-face {
    font-family: 'Fira Code';
    src:
      url('/assests/fonts/mono/woff2/FiraCode-Bold.woff2') format('woff2'),
      url('/assests/fonts/mono/woff/FiraCode-Bold.woff') format('woff');
    font-weight: 700;
    font-style: normal;
  }

  @font-face {
    font-family: 'Fira Code VF';
    src:
      url('/assests/fonts/mono/woff2/FiraCode-VF.woff2')
        format('woff2-variations'),
      url('woff/FiraCode-VF.woff') format('woff-variations');
    /* font-weight requires a range: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide#Using_a_variable_font_font-face_changes */
    font-weight: 300 700;
    font-style: normal;
  }

  html,
  body {
    margin: 0;
    width: 100%;
    background-color: var(--background);
    height: fit-content;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-synthesis: none;
    text-size-adjust: 100%;
    font-feature-settings:
      'kern' 1,
      'liga' 1;
    font-kerning: normal;
    -webkit-tap-highlight-color: transparent;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    line-height: 1.5;
    line-height: calc(1em + 0.5rem);
    font-family:
      'proxima-soft',
      'Inter',
      'Inter var',
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif;
  }
  @supports (font-variation-settings: normal) {
    html {
      font-feature-settings:
        'kern' 1,
        'liga' 1,
        'calt' 1,
        'ss01' 1;
    }
  }
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    html {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  }
</style>
